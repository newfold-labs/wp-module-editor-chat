// Typing indicator styles
.nfd-editor-chat-typing-indicator {
	display: flex;
	align-items: center;
	gap: 10px;
	padding: 8px 0;
}

.nfd-editor-chat-typing-indicator__spinner {
	color: var(--nfd-editor-chat-color-primary, #3b82f6);
	animation: nfd-spin 1s linear infinite;
	flex-shrink: 0;
}

.nfd-editor-chat-typing-indicator__text {
	font-size: var(--nfd-editor-chat-font-size-base);
	color: var(--nfd-editor-chat-color-text);
	font-weight: 500;
}

.nfd-editor-chat-typing-indicator__preview {
	margin-top: 8px;
	padding: 12px;
	background: rgba(0, 0, 0, 0.02);
	border-radius: 8px;
	font-size: var(--nfd-editor-chat-font-size-sm);
	color: var(--nfd-editor-chat-color-grey-dark);
	line-height: 1.5;
	white-space: pre-wrap;
	word-break: break-word;
	max-height: 200px;
	overflow-y: auto;
}

// Tool status display (detailed view during tool execution)
.nfd-editor-chat-tool-status {
	background: linear-gradient(135deg, rgba(59, 130, 246, 0.06) 0%, rgba(147, 51, 234, 0.06) 100%);
	border: 1px solid rgba(59, 130, 246, 0.15);
	border-radius: 12px;
	padding: 14px 16px;
	min-width: 220px;
}

.nfd-editor-chat-tool-status__header {
	display: flex;
	align-items: center;
	gap: 10px;
	margin-bottom: 6px;
}

.nfd-editor-chat-tool-status__spinner {
	color: var(--nfd-editor-chat-color-primary, #3b82f6);
	animation: nfd-spin 1s linear infinite;
	flex-shrink: 0;
}

.nfd-editor-chat-tool-status__title {
	font-weight: 600;
	font-size: var(--nfd-editor-chat-font-size-base);
	color: var(--nfd-editor-chat-color-text);
	flex: 1;
}

.nfd-editor-chat-tool-status__description {
	font-size: var(--nfd-editor-chat-font-size-sm);
	color: var(--nfd-editor-chat-color-grey-medium);
	line-height: 1.5;
	padding-left: 28px; // Align with title (icon width + gap)
}

.nfd-editor-chat-tool-status__params {
	color: var(--nfd-editor-chat-color-primary, #3b82f6);
	font-weight: 500;
}

.nfd-editor-chat-tool-status__progress {
	margin-top: 10px;
	padding-top: 10px;
	border-top: 1px solid rgba(59, 130, 246, 0.1);
}

.nfd-editor-chat-tool-status__progress-bar {
	height: 3px;
	background: rgba(59, 130, 246, 0.15);
	border-radius: 2px;
	overflow: hidden;
}

.nfd-editor-chat-tool-status__progress-fill {
	height: 100%;
	width: 30%;
	background: linear-gradient(90deg, #3b82f6, #8b5cf6, #3b82f6);
	background-size: 200% 100%;
	border-radius: 2px;
	animation: nfd-progress-slide 1.5s ease-in-out infinite;
}

// Animations
@keyframes nfd-spin {
	to {
		transform: rotate(360deg);
	}
}

@keyframes nfd-progress-slide {
	0% {
		transform: translateX(-100%);
		background-position: 0% 50%;
	}
	50% {
		background-position: 100% 50%;
	}
	100% {
		transform: translateX(400%);
		background-position: 0% 50%;
	}
}

// Legacy styles (keeping for backward compatibility)
.nfd-editor-chat-typing-indicator__icon {
	font-size: 16px;
	line-height: 1;
}

.nfd-editor-chat-typing-indicator__status {
	font-size: var(--nfd-editor-chat-font-size-base);
	color: var(--nfd-editor-chat-color-grey-medium);
	font-style: italic;
}

.nfd-editor-chat-typing-indicator__dots {
	display: flex;
	gap: 3px;
	align-items: center;

	span {
		width: 4px;
		height: 4px;
		border-radius: 50%;
		background-color: var(--nfd-editor-chat-color-grey-medium);
		animation: nfd-dot-bounce 1.4s infinite ease-in-out both;

		&:nth-child(1) {
			animation-delay: -0.32s;
		}

		&:nth-child(2) {
			animation-delay: -0.16s;
		}

		&:nth-child(3) {
			animation-delay: 0s;
		}
	}
}

@keyframes nfd-dot-bounce {
	0%,
	80%,
	100% {
		transform: scale(0.6);
		opacity: 0.5;
	}

	40% {
		transform: scale(1);
		opacity: 1;
	}
}

.nfd-editor-chat-typing-indicator__loader {
	width: 20px;
	aspect-ratio: 2;
	--_g: no-repeat
		radial-gradient(circle closest-side, var(--nfd-editor-chat-color-grey-medium) 90%, transparent);
	background:
		var(--_g) 0% 50%,
		var(--_g) 50% 50%,
		var(--_g) 100% 50%;
	background-size: calc(100% / 3) 40%;
	animation: nfd-editor-chat-loader 1s infinite linear;
}

@keyframes nfd-editor-chat-loader {
	20% {
		background-position:
			0% 100%,
			50% 50%,
			100% 50%;
	}

	40% {
		background-position:
			0% 0%,
			50% 100%,
			100% 50%;
	}

	60% {
		background-position:
			0% 50%,
			50% 0%,
			100% 100%;
	}

	80% {
		background-position:
			0% 50%,
			50% 50%,
			100% 0%;
	}
}

// =============================================================================
// Tool Execution List - Shows all tools in a persistent list
// =============================================================================
.nfd-tool-execution {
	background: #fff;
	border: 1px solid #e8e8e8;
	border-radius: 8px;
	overflow: hidden;

	// Inline variant (within a message)
	&--inline {
		margin-top: 8px;
		width: 100%;
	}

	// Full width when collapsed
	&--collapsed {
		width: 100%;
	}
}

.nfd-tool-execution__header {
	display: flex;
	align-items: center;
	gap: 6px;
	padding: 6px 10px;
	width: 100%;
	background: #fafafa;
	border: none;
	border-bottom: 1px solid #e8e8e8;
	font-size: var(--nfd-editor-chat-font-size-sm);
	font-weight: 500;
	color: #888;
	cursor: pointer;
	text-align: left;
	transition: background 0.15s ease;

	&:hover {
		background: #f0f0f0;
	}

	&:focus {
		outline: none;
		background: #f0f0f0;
	}
}

// Hide border when collapsed
.nfd-tool-execution--collapsed .nfd-tool-execution__header {
	border-bottom: none;
}

.nfd-tool-execution__chevron {
	color: #bbb;
	flex-shrink: 0;
}

.nfd-tool-execution__header-count {
	color: #aaa;
	font-weight: 400;
	margin-left: auto;
}

.nfd-tool-execution__list {
	display: flex;
	flex-direction: column;
}

// Individual tool execution item
.nfd-tool-execution__item {
	padding: 5px 10px;
	border-bottom: 1px solid #f0f0f0;
	transition: background 0.15s ease;

	&:last-child {
		border-bottom: none;
	}

	// Completed successfully
	&--complete {
		.nfd-tool-execution__item-title {
			color: #aaa;
		}
	}

	// Currently executing
	&--active {
		background: #fafafa;

		.nfd-tool-execution__item-title {
			color: #666;
			font-weight: 500;
		}
	}

	// Failed
	&--error {
		background: rgba(214, 54, 56, 0.04);

		.nfd-tool-execution__item-title {
			color: var(--nfd-editor-chat-color-error);
		}
	}
}

.nfd-tool-execution__item-header {
	display: flex;
	align-items: center;
	gap: 6px;
}

.nfd-tool-execution__icon {
	flex-shrink: 0;
	width: 12px;
	height: 12px;

	&--pending {
		color: #ccc;
	}

	&--active {
		color: #aaa;
		animation: nfd-spin 1s linear infinite;
	}

	&--success {
		color: #aaa;
	}

	&--error {
		color: var(--nfd-editor-chat-color-error);
	}
}

.nfd-tool-execution__item-title {
	font-size: var(--nfd-editor-chat-font-size-sm);
	font-weight: 400;
	color: #888;
	flex: 1;
}

.nfd-tool-execution__item-params {
	font-size: 11px;
	color: #bbb;
	font-weight: 400;
}

.nfd-tool-execution__item-progress {
	margin-top: 3px;
	padding-left: 18px;
	font-size: 11px;
	color: #aaa;
	line-height: 1.3;
}

// =============================================================================
// Simple Status Line - For completed actions (end-user friendly)
// =============================================================================
.nfd-tool-status-line {
	display: flex;
	align-items: center;
	gap: 6px;
	margin-top: 10px;
	padding: 6px 0;
	font-size: var(--nfd-editor-chat-font-size-sm);
	color: #888;
}

.nfd-tool-status-line__icon {
	color: #10b981; // Green for success
	flex-shrink: 0;

	&--error {
		color: var(--nfd-editor-chat-color-error);
	}
}

.nfd-tool-status-line__text {
	font-weight: 400;
}
